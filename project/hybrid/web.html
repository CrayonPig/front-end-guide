<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web渲染 | 前端工程化详解</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="logo.svg">
    <meta name="description" content="前端工程化详解;开箱即用的前端工程化方案;前端代码规范;使用过程中如碰到问题，请到Github进行提问。 https://github.com/CrayonPig/front-end-guide">
    
    <link rel="preload" href="/assets/css/0.styles.bde997cd.css" as="style"><link rel="preload" href="/assets/js/app.8ebedc45.js" as="script"><link rel="preload" href="/assets/js/2.bfb6a95c.js" as="script"><link rel="preload" href="/assets/js/1.469e453a.js" as="script"><link rel="preload" href="/assets/js/29.852f6634.js" as="script"><link rel="prefetch" href="/assets/js/10.65ac3e9e.js"><link rel="prefetch" href="/assets/js/100.8126e370.js"><link rel="prefetch" href="/assets/js/101.76056f20.js"><link rel="prefetch" href="/assets/js/102.1d20fa54.js"><link rel="prefetch" href="/assets/js/103.f67a9d3d.js"><link rel="prefetch" href="/assets/js/104.78f882df.js"><link rel="prefetch" href="/assets/js/105.1c6453ab.js"><link rel="prefetch" href="/assets/js/106.fcedbc52.js"><link rel="prefetch" href="/assets/js/107.475b7dff.js"><link rel="prefetch" href="/assets/js/108.3e46479a.js"><link rel="prefetch" href="/assets/js/109.4e8ee449.js"><link rel="prefetch" href="/assets/js/11.057fd523.js"><link rel="prefetch" href="/assets/js/110.c5ccc7d1.js"><link rel="prefetch" href="/assets/js/111.44be761b.js"><link rel="prefetch" href="/assets/js/112.7abae00b.js"><link rel="prefetch" href="/assets/js/113.a7f305d7.js"><link rel="prefetch" href="/assets/js/114.8c8267db.js"><link rel="prefetch" href="/assets/js/115.56046e7d.js"><link rel="prefetch" href="/assets/js/116.4c8574d2.js"><link rel="prefetch" href="/assets/js/117.c3810c02.js"><link rel="prefetch" href="/assets/js/118.5baf1809.js"><link rel="prefetch" href="/assets/js/119.aafdfd99.js"><link rel="prefetch" href="/assets/js/12.79b1a2ff.js"><link rel="prefetch" href="/assets/js/120.05c1650e.js"><link rel="prefetch" href="/assets/js/121.d01ccf92.js"><link rel="prefetch" href="/assets/js/122.d574c7a3.js"><link rel="prefetch" href="/assets/js/123.6857f3e5.js"><link rel="prefetch" href="/assets/js/124.6c22c30a.js"><link rel="prefetch" href="/assets/js/125.1a3ca698.js"><link rel="prefetch" href="/assets/js/126.a0366843.js"><link rel="prefetch" href="/assets/js/127.0666eadd.js"><link rel="prefetch" href="/assets/js/128.e20c4b25.js"><link rel="prefetch" href="/assets/js/129.2693dcf0.js"><link rel="prefetch" href="/assets/js/13.19ee6dc8.js"><link rel="prefetch" href="/assets/js/130.e14eb668.js"><link rel="prefetch" href="/assets/js/131.eef2e457.js"><link rel="prefetch" href="/assets/js/132.a071c2df.js"><link rel="prefetch" href="/assets/js/14.6f68b2fb.js"><link rel="prefetch" href="/assets/js/15.578bc43b.js"><link rel="prefetch" href="/assets/js/16.969adb08.js"><link rel="prefetch" href="/assets/js/17.5d868024.js"><link rel="prefetch" href="/assets/js/18.6760ebe3.js"><link rel="prefetch" href="/assets/js/19.17a4bdd3.js"><link rel="prefetch" href="/assets/js/20.e8c234f8.js"><link rel="prefetch" href="/assets/js/21.88fc0c50.js"><link rel="prefetch" href="/assets/js/22.3f90804b.js"><link rel="prefetch" href="/assets/js/23.57948e80.js"><link rel="prefetch" href="/assets/js/24.647467e6.js"><link rel="prefetch" href="/assets/js/25.f5261672.js"><link rel="prefetch" href="/assets/js/26.b7f50a0a.js"><link rel="prefetch" href="/assets/js/27.f0aa7f17.js"><link rel="prefetch" href="/assets/js/28.b61027a4.js"><link rel="prefetch" href="/assets/js/3.7ca1f2e6.js"><link rel="prefetch" href="/assets/js/30.00e39012.js"><link rel="prefetch" href="/assets/js/31.13c098ac.js"><link rel="prefetch" href="/assets/js/32.e7f38023.js"><link rel="prefetch" href="/assets/js/33.c62e7810.js"><link rel="prefetch" href="/assets/js/34.2c776f50.js"><link rel="prefetch" href="/assets/js/35.15c87d2b.js"><link rel="prefetch" href="/assets/js/36.8a4818f3.js"><link rel="prefetch" href="/assets/js/37.a24f96cf.js"><link rel="prefetch" href="/assets/js/38.d28b5123.js"><link rel="prefetch" href="/assets/js/39.821989fd.js"><link rel="prefetch" href="/assets/js/4.aa9b50cc.js"><link rel="prefetch" href="/assets/js/40.45d1a045.js"><link rel="prefetch" href="/assets/js/41.79b1085c.js"><link rel="prefetch" href="/assets/js/42.77c34886.js"><link rel="prefetch" href="/assets/js/43.191de079.js"><link rel="prefetch" href="/assets/js/44.5d12f5c3.js"><link rel="prefetch" href="/assets/js/45.c1f9b2a0.js"><link rel="prefetch" href="/assets/js/46.f4f7f22f.js"><link rel="prefetch" href="/assets/js/47.19886bf8.js"><link rel="prefetch" href="/assets/js/48.b8368c75.js"><link rel="prefetch" href="/assets/js/49.b47516f8.js"><link rel="prefetch" href="/assets/js/5.5461dcff.js"><link rel="prefetch" href="/assets/js/50.cb259946.js"><link rel="prefetch" href="/assets/js/51.385586ed.js"><link rel="prefetch" href="/assets/js/52.0499ec29.js"><link rel="prefetch" href="/assets/js/53.4d2fd1ec.js"><link rel="prefetch" href="/assets/js/54.8053a317.js"><link rel="prefetch" href="/assets/js/55.061dd982.js"><link rel="prefetch" href="/assets/js/56.2a8f21c7.js"><link rel="prefetch" href="/assets/js/57.7cb91c8d.js"><link rel="prefetch" href="/assets/js/58.e003cae8.js"><link rel="prefetch" href="/assets/js/59.09dea298.js"><link rel="prefetch" href="/assets/js/6.3c46457e.js"><link rel="prefetch" href="/assets/js/60.14094921.js"><link rel="prefetch" href="/assets/js/61.b0834943.js"><link rel="prefetch" href="/assets/js/62.67ad3831.js"><link rel="prefetch" href="/assets/js/63.346e96ac.js"><link rel="prefetch" href="/assets/js/64.e375d5ae.js"><link rel="prefetch" href="/assets/js/65.721867e2.js"><link rel="prefetch" href="/assets/js/66.529613b2.js"><link rel="prefetch" href="/assets/js/67.360d1c32.js"><link rel="prefetch" href="/assets/js/68.0fd78d1f.js"><link rel="prefetch" href="/assets/js/69.82f16439.js"><link rel="prefetch" href="/assets/js/7.e8177bf4.js"><link rel="prefetch" href="/assets/js/70.a1764409.js"><link rel="prefetch" href="/assets/js/71.cfed3ea4.js"><link rel="prefetch" href="/assets/js/72.2fc36579.js"><link rel="prefetch" href="/assets/js/73.4c32e566.js"><link rel="prefetch" href="/assets/js/74.1a847767.js"><link rel="prefetch" href="/assets/js/75.14dc8a44.js"><link rel="prefetch" href="/assets/js/76.5889212d.js"><link rel="prefetch" href="/assets/js/77.1b4df8bc.js"><link rel="prefetch" href="/assets/js/78.4f77fbd9.js"><link rel="prefetch" href="/assets/js/79.b76c8e15.js"><link rel="prefetch" href="/assets/js/80.8c103ef8.js"><link rel="prefetch" href="/assets/js/81.b6089f50.js"><link rel="prefetch" href="/assets/js/82.e735ecf6.js"><link rel="prefetch" href="/assets/js/83.d8e4702f.js"><link rel="prefetch" href="/assets/js/84.622ce1db.js"><link rel="prefetch" href="/assets/js/85.75c2d444.js"><link rel="prefetch" href="/assets/js/86.efb29afe.js"><link rel="prefetch" href="/assets/js/87.319909c8.js"><link rel="prefetch" href="/assets/js/88.487727ab.js"><link rel="prefetch" href="/assets/js/89.88e1f875.js"><link rel="prefetch" href="/assets/js/90.418a5fca.js"><link rel="prefetch" href="/assets/js/91.d8a17cc0.js"><link rel="prefetch" href="/assets/js/92.183b7f24.js"><link rel="prefetch" href="/assets/js/93.d8ddc91e.js"><link rel="prefetch" href="/assets/js/94.64ebd03e.js"><link rel="prefetch" href="/assets/js/95.16c1de90.js"><link rel="prefetch" href="/assets/js/96.845ace36.js"><link rel="prefetch" href="/assets/js/97.687e11a3.js"><link rel="prefetch" href="/assets/js/98.91f89ded.js"><link rel="prefetch" href="/assets/js/99.f0c2deb0.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e8c0468.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bde997cd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">前端工程化详解</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/project/" class="nav-link router-link-active">
  工程化入门
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化进阶" class="dropdown-title"><span class="title">工程化进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化进阶" class="mobile-dropdown-title"><span class="title">工程化进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/advanced/rollup/" class="nav-link">
  Rollup
</a></li><li class="dropdown-item"><!----> <a href="/advanced/esbuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/advanced/vite/" class="nav-link">
  Vite
</a></li></ul></div></div><div class="nav-item"><a href="/guide/" class="nav-link">
  代码规范
</a></div><div class="nav-item"><a href="https://origin.duanhl.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  源码分析
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/monitor/" class="nav-link">
  前端监控系统
</a></div><div class="nav-item"><a href="https://github.com/CrayonPig/front-end-guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/project/" class="nav-link router-link-active">
  工程化入门
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工程化进阶" class="dropdown-title"><span class="title">工程化进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="工程化进阶" class="mobile-dropdown-title"><span class="title">工程化进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/advanced/rollup/" class="nav-link">
  Rollup
</a></li><li class="dropdown-item"><!----> <a href="/advanced/esbuild/" class="nav-link">
  esbuild
</a></li><li class="dropdown-item"><!----> <a href="/advanced/vite/" class="nav-link">
  Vite
</a></li></ul></div></div><div class="nav-item"><a href="/guide/" class="nav-link">
  代码规范
</a></div><div class="nav-item"><a href="https://origin.duanhl.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  源码分析
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/monitor/" class="nav-link">
  前端监控系统
</a></div><div class="nav-item"><a href="https://github.com/CrayonPig/front-end-guide" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/project/" aria-current="page" class="sidebar-link">简介</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>项目立项</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/setUp/flow.html" class="sidebar-link">产研流程</a></li><li><a href="/project/setUp/documents.html" class="sidebar-link">知识协同</a></li><li><a href="/project/setUp/selection.html" class="sidebar-link">技术选型</a></li><li><a href="/project/setUp/standard.html" class="sidebar-link">交付标准</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>代码质量</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/codeQuality/guide.html" class="sidebar-link">统一规范</a></li><li><a href="/project/codeQuality/lint.html" class="sidebar-link">规范工具</a></li><li><a href="/project/codeQuality/ts.html" class="sidebar-link">类型约束</a></li><li><a href="/project/codeQuality/version.html" class="sidebar-link">版本控制</a></li><li><a href="/project/codeQuality/codeReview.html" class="sidebar-link">Code Review</a></li><li><a href="/project/codeQuality/tsconfig.html" class="sidebar-link">tsconfig.json 字段解析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程搭建</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/build/build.html" class="sidebar-link">构建工具</a></li><li><a href="/project/build/cli.html" class="sidebar-link">脚手架</a></li><li><a href="/project/build/ast.html" class="sidebar-link">AST</a></li><li><a href="/project/build/debug.html" class="sidebar-link">代码调试</a></li><li><a href="/project/build/package.html" class="sidebar-link">package.json 字段解析</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>组件建设</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/component/module.html" class="sidebar-link">组件化</a></li><li><a href="/project/component/guide.html" class="sidebar-link">设计规范</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>测试保障</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/test/unit.html" class="sidebar-link">单元测试</a></li><li><a href="/project/test/integration.html" class="sidebar-link">集成测试</a></li><li><a href="/project/test/e2e.html" class="sidebar-link">端到端测试(E2E)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CI/CD</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/deploy/" class="sidebar-link">简介</a></li><li><a href="/project/deploy/basic.html" class="sidebar-link">传统部署</a></li><li><a href="/project/deploy/container.html" class="sidebar-link">容器化部署</a></li><li><a href="/project/deploy/githubActions.html" class="sidebar-link">GitHub Actions</a></li><li><a href="/project/deploy/gitlabCI.html" class="sidebar-link">GitLab Pipelines</a></li><li><a href="/project/deploy/mode.html" class="sidebar-link">版本部署方式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>整体优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/optimize/build.html" class="sidebar-link">构建优化</a></li><li><a href="/project/optimize/volume.html" class="sidebar-link">体积优化</a></li><li><a href="/project/optimize/performance.html" class="sidebar-link">性能优化</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>安全保障</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/security/attack.html" class="sidebar-link">常见攻击</a></li><li><a href="/project/security/resource.html" class="sidebar-link">资源劫持</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>页面监控</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/monitor/performance.html" class="sidebar-link">性能监控</a></li><li><a href="/project/monitor/error.html" class="sidebar-link">异常监控</a></li><li><a href="/project/monitor/blankScreen.html" class="sidebar-link">白屏监控</a></li><li><a href="/project/monitor/jank.html" class="sidebar-link">卡顿监控</a></li><li><a href="/project/monitor/behaviour.html" class="sidebar-link">行为监控</a></li><li><a href="/project/monitor/report.html" class="sidebar-link">数据上报</a></li><li><a href="/project/monitor/sentry.html" class="sidebar-link">解决方案Sentry</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>跨平台开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/hybrid/" aria-current="page" class="sidebar-link">简介</a></li><li><a href="/project/hybrid/web.html" aria-current="page" class="active sidebar-link">Web渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/project/hybrid/web.html#渲染原理" class="sidebar-link">渲染原理</a></li><li class="sidebar-sub-header"><a href="/project/hybrid/web.html#cordova" class="sidebar-link">Cordova</a></li><li class="sidebar-sub-header"><a href="/project/hybrid/web.html#phonegap" class="sidebar-link">PhoneGap</a></li><li class="sidebar-sub-header"><a href="/project/hybrid/web.html#ionic" class="sidebar-link">Ionic</a></li><li class="sidebar-sub-header"><a href="/project/hybrid/web.html#jsbridge" class="sidebar-link">JSBridge</a></li><li class="sidebar-sub-header"><a href="/project/hybrid/web.html#electron-桌面端开发" class="sidebar-link">Electron（桌面端开发）</a></li><li class="sidebar-sub-header"><a href="/project/hybrid/web.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/project/hybrid/native.html" class="sidebar-link">原生渲染</a></li><li><a href="/project/hybrid/canvas.html" class="sidebar-link">自绘制引擎渲染</a></li><li><a href="/project/hybrid/use.html" class="sidebar-link">技术选型</a></li><li><a href="/project/hybrid/miniProgram.html" class="sidebar-link">小程序</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>微前端</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/project/micro/" class="sidebar-link">简介</a></li><li><a href="/project/micro/use.html" class="sidebar-link">技术选型</a></li><li><a href="/project/micro/reuse.html" class="sidebar-link">公共代码复用</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="web渲染"><a href="#web渲染" class="header-anchor">#</a> Web渲染</h1> <p>基于 Web 渲染的混合开发 App 是一种基于 Web 技术（HTML、CSS、JavaScript）开发的移动应用，同时使用原生容器提供的 Web 视图组件来渲染 UI。它是一种混合模式的开发方式，通过在原生容器中嵌入 Web 视图来实现跨平台开发，既可以使用 Web 技术进行开发，又可以调用原生 API 来实现更加丰富的功能和更好的用户体验。</p> <p>在基于 Web 渲染的混合开发中，Web 页面运行在原生容器提供的 WebView 组件中，通过 JavaScript 与原生 API 进行交互，实现应用程序的功能和 UI 渲染。相比于纯 Web 应用，基于 Web 渲染的混合开发具有更好的性能和用户体验，同时又可以利用 Web 开发的高效性和跨平台特性。</p> <p>目前比较流行的基于 Web 渲染的混合开发框架包括 Cordova、PhoneGap、Ionic 等。这些框架提供了丰富的 API 和插件，可以帮助开发者快速开发移动应用，并且支持多平台开发。</p> <h2 id="渲染原理"><a href="#渲染原理" class="header-anchor">#</a> 渲染原理</h2> <p>基于Web渲染的混合开发App的渲染原理都基本类似，在应用中内置一个 WebView 组件，并通过 JavaScript 代码将本地应用和 Web 应用进行交互。当用户打开应用时，会在 WebView 中加载应用的主页面，并且可以通过 JavaScript 代码来访问 WebView 的 DOM 和 CSS 样式。</p> <p><img src="/assets/img/WebApp.1adbdf45.png" alt="Hybrid"></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>简单来说，就是套了一层原生壳的web页面，web通过提前约定好的协议调用原生，原生调用设备本身的能力</p></div> <h2 id="cordova"><a href="#cordova" class="header-anchor">#</a> Cordova</h2> <p><a href="https://cordova.apache.org/" target="_blank" rel="noopener noreferrer">Cordova<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是社区最早出现的混合开发App的框架。最初由 Nitobi Software（现在是 Adobe Systems）开发，后来被 Apache 软件基金会收购并捐赠给了 Apache 基金会，成为了 Apache 的一个开源项目。</p> <p>Cordova主要提供了三种能力：</p> <ul><li>设备相关的API，通过API，移动应用能够以JavaScript访问原生的设备功能，如摄像头、麦克风等。</li> <li>统一的JavaScript类库，以及为这些类库所用的设备相关的原生后台代码。</li> <li>跨平台打包能力，支持iOS, Android, ubuntu phone os, Blackberry, Windows Phone, Palm WebOS, Bada 和 Symbian平台</li> <li>自定义插件功能，可以让开发者通过 JavaScript 代码来调用设备的本地功能，如摄像头、GPS、文件系统等。</li></ul> <h3 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h3> <ol><li>跨平台：Cordova 可以构建跨平台应用，支持 Android、iOS、Windows 等多个平台，开发人员只需要编写一份代码，就可以在不同的平台上运行。</li> <li>快速开发：使用 Web 技术开发，无需学习复杂的原生开发语言和工具，可以快速迭代开发，并且具有较好的可维护性。</li> <li>简单易用：Cordova 提供了一些常用的插件和 API，可以方便地访问设备的各种功能，如相机、地理位置、传感器等。</li> <li>成熟稳定：Cordova 已经发展多年，拥有庞大的社区和生态系统，有大量的插件和模板可供选择，同时也有完善的文档和支持。</li></ol> <h3 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h3> <ol><li>性能问题：Cordova 应用的性能受到 WebView 的限制，可能比原生应用慢一些，尤其是在处理复杂的图形和动画时。</li> <li>依赖第三方库：Cordova 应用需要依赖第三方库和插件，这些库和插件可能存在安全风险或者兼容性问题，需要开发者自行评估和选择。</li> <li>限制功能：Cordova 的插件机制提供了访问设备本地功能的能力，但是一些高级功能可能无法使用，需要使用原生开发来实现。</li> <li>开发门槛：虽然 Cordova 简化了开发流程，但是开发人员仍然需要掌握 Web 技术和 Cordova API，需要一定的开发经验和学习成本。</li></ol> <h2 id="phonegap"><a href="#phonegap" class="header-anchor">#</a> PhoneGap</h2> <p>PhoneGap 和 Cordova 最初是一个项目，由于商业原因被 Adobe 收购后，项目名称发生了变化，PhoneGap 成为了 Adobe 的商标，而 Cordova 成为了 Apache 基金会的开源项目。因此，PhoneGap 和 Cordova 之间的区别主要是商标所有权的区别，其余部分基本一致。</p> <p>具体来说，PhoneGap 和 Cordova 都是基于 Web 技术开发移动应用的框架，采用的是混合式开发的方式，将本地应用和 Web 应用混合在一起。它们都使用 WebView 来实现 Web 应用的渲染，并且提供了访问设备本地功能的插件。</p> <p>在技术实现上，PhoneGap 和 Cordova 的代码基本相同，因为 PhoneGap 本质上是 Cordova 的商标版本，是在 Cordova 的基础上添加了 Adobe 的一些功能。但是，它们在使用上可能有一些区别，比如 PhoneGap 的构建工具使用云端服务，而 Cordova 的构建工具需要在本地安装。</p> <h2 id="ionic"><a href="#ionic" class="header-anchor">#</a> Ionic</h2> <p><a href="https://ionicframework.com/" target="_blank" rel="noopener noreferrer">Ionic<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>聚焦于感官和应用的Ui交互，它不是 Phone Gap或 Cordova的替代品，ionic只是在前端大幅度简化了APP开发。在早期，为了发挥ionic的完美功能，需要 AngularJS的配合。目前，Ionic已经无需强制要求开发者使用任何框架。</p> <p>针对Cordova存在的问题，Ionic做了一些优化。</p> <ul><li>内置丰富的开箱即用的原生能力</li> <li>提供前端UI界面，统一标准</li> <li>使用多Webview机制，利用原生转场解决流畅性问题</li></ul> <h2 id="jsbridge"><a href="#jsbridge" class="header-anchor">#</a> JSBridge</h2> <p>JSBridge是一种基于WebView的前端解决方案，它通过JavaScript与Native之间进行通信，实现在WebView中调用Native功能或在Native中调用WebView中的JavaScript函数。JSBridge的实现原理是通过在Native端提供一个JavaScript接口，并在WebView中注入一个JSBridge对象，使得WebView中的JavaScript代码可以通过JSBridge对象与Native进行通信。</p> <p>简单来说，JSBridge就是一种通讯方式，通过JSBridge，WebView可以调用原生方法，原生可以调用Web端的方法。
<img src="/assets/img/jsbridge.ecc09afe.png" alt="JSBridge"></p> <h3 id="js调用native的方式"><a href="#js调用native的方式" class="header-anchor">#</a> JS调用Native的方式</h3> <ol><li>拦截URL Scheme
Android：Webview提供了shouldOverrideUrlLoading方法来提供给Native拦截H5发送的URL Scheme请求</li></ol> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomWebViewClient</span> <span class="token keyword">extends</span> <span class="token class-name">WebViewClient</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldOverrideUrlLoading</span><span class="token punctuation">(</span><span class="token class-name">WebView</span> view<span class="token punctuation">,</span> <span class="token class-name">String</span> url<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
      <span class="token comment">// 场景一： 拦截请求、接收 scheme</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// handle</span>
            <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
            <span class="token comment">// callback</span>
            view<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">&quot;javascript:setAllContent(&quot;</span> <span class="token operator">+</span> json <span class="token operator">+</span> <span class="token string">&quot;);&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">shouldOverrideUrlLoading</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179823-30051">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="public class CustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
      ......
      // 场景一： 拦截请求、接收 scheme
        if (url.equals(&quot;xxx&quot;)) {

            // handle
            ...
            // callback
            view.loadUrl(&quot;javascript:setAllContent(&quot; + json + &quot;);&quot;)
            return true;
        }
        return super.shouldOverrideUrlLoading(url);
     }
}
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179823-30051" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>ios WKWebview可以根据拦截到的URL Scheme和对应的参数执行相关的操作</p> <div class="language-Swift line-numbers-mode"><pre class="language-swift"><code><span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>webView<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token class-name">WKWebView</span> <span class="token operator">*</span><span class="token punctuation">)</span>webView decidePolicyForNavigationAction<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token class-name">WKNavigationAction</span> <span class="token operator">*</span><span class="token punctuation">)</span>navigationAction decisionHandler<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token function">void</span> <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">WKNavigationActionPolicy</span><span class="token punctuation">)</span><span class="token punctuation">)</span>decisionHandler<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>navigationAction<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span>absoluteString hasPrefix<span class="token punctuation">:</span>@<span class="token string-literal"><span class="token string">&quot;xxx&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token class-name">UIApplication</span> sharedApplication<span class="token punctuation">]</span> openURL<span class="token punctuation">:</span>navigationAction<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">decisionHandler</span><span class="token punctuation">(</span><span class="token class-name">WKNavigationActionPolicyAllow</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179829-58068">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="- (void)webView:(WKWebView *)webView decidePolicyForNavigationAction:(WKNavigationAction *)navigationAction decisionHandler:(void (^)(WKNavigationActionPolicy))decisionHandler{
    if ([navigationAction.request.URL.absoluteString hasPrefix:@&quot;xxx&quot;]) {
        [[UIApplication sharedApplication] openURL:navigationAction.request.URL];
    }
    decisionHandler(WKNavigationActionPolicyAllow);
}
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179829-58068" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>js调用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">qunarhy</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>hy<span class="token operator">/</span>url<span class="token operator">?</span>url<span class="token operator">=</span>ymfe<span class="token punctuation">.</span>tech  <span class="token comment">// 自定义的</span>
protocol是qunarhy，host则是hy

window<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span>messageHandlers<span class="token punctuation">.</span>topicSelect<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">vdiscover://post_new_note?attach=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function">prompt</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">vdiscover://post_new_note?attach=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179831-36474">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="qunarhy://hy/url?url=ymfe.tech  // 自定义的
protocol是qunarhy，host则是hy

window.webkit.messageHandlers.topicSelect.postMessage(`vdiscover://post_new_note?attach=${JSON.stringify(params)}`)
window.prompt(`vdiscover://post_new_note?attach=${encodeURIComponent(JSON.stringify(params))}`)
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179831-36474" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>URL SCHEME是一种类似于url的链接，是为了方便app直接互相调用设计的，形式和普通的url近似，主要区别是protocol和host一般是自定义的。</p> <p>拦截URL SCHEME的主要流程是：Web端通过某种方式(例如：iframe.src)发送URL Scheme请求，之后Native拦截到请求并更具URL SCHEME（包括所带的参数）进行相关的操作</p> <h4 id="优点-2"><a href="#优点-2" class="header-anchor">#</a> 优点</h4> <ul><li>不存在漏洞问题，使用灵活，可以实现H5和Native页面的无缝切换
场景：适用于快速迭代，快速开发上线，某一链接直接填写H5链接，在对应的Native页面开发完成前先跳转至H5页面。等Native页面开发完成之后再进行拦截，跳转至Native页面，此时H5链接不用修改</li></ul> <h4 id="缺点-2"><a href="#缺点-2" class="header-anchor">#</a> 缺点</h4> <ul><li>当使用iframe.src来发送URL Scheme需要对URL长度作控制，使用复杂。速度较慢
<ul><li>有些方案为了避免url长度隐患的缺陷，在ios上采用了使用ajax发送同域请求的方式，并将参数放到head或body中，这样虽然避免了url长度的隐患，但WKWebView并不支持这种方式</li> <li>为什么选择iframe.src不选择location.herf?(因为如果通过location.href连续调用Native，很容易丢失一些调用)</li></ul></li> <li>创建请求需要一定的耗时，比诸如API的方式调用同样的功能耗时更长。</li></ul> <ol start="2"><li>注入API
基于WebView提供的能力，我们可以向Window上注入对象或方法，js可以直接使用window上的方法，这种方法js需要等到Native执行完对应的逻辑之后才能进行回调里的操作</li></ol> <p>Android的WebView提供了addJavascriptInterface方法，支持Android4.2及以上的系统</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>gpcWebView<span class="token punctuation">.</span><span class="token function">addJavascriptInterface</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JavaScriptInterface</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 'nativeApiBridge'<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JavaScriptInterface</span> <span class="token punctuation">{</span>
    <span class="token class-name">Context</span> mContext<span class="token punctuation">;</span>

  <span class="token class-name">JavaScriptInterface</span><span class="token punctuation">(</span><span class="token class-name">Context</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mContext <span class="token operator">=</span> c<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">share</span><span class="token punctuation">(</span><span class="token class-name">String</span> webMessage<span class="token punctuation">)</span><span class="token punctuation">{</span>            
    <span class="token comment">// Native 逻辑</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179831-33267">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="gpcWebView.addJavascriptInterface(new JavaScriptInterface(), 'nativeApiBridge'); 
public class JavaScriptInterface {
    Context mContext;

  JavaScriptInterface(Context c) {
    mContext = c;
  }

  public void share(String webMessage){            
    // Native 逻辑
  }
}
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179831-33267" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>JS调用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span>NativeApi<span class="token punctuation">.</span><span class="token function">share</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179832-4953">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="window.NativeApi.share(xxx);
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179832-4953" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>iOS的UIWebView提供了JavascriptScore方法，支持iOS7.0以上的系统，WKWebview提供window.webkit.messageHandlers方法，支持iOS8.0及以上系统。UIWebview在几年前常用，目前不常见</p> <div class="language-Swift line-numbers-mode"><pre class="language-swift"><code><span class="token class-name">WKWebViewConfiguration</span> <span class="token operator">*</span>configuration <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token class-name">WKWebViewConfiguration</span> alloc<span class="token punctuation">]</span> <span class="token keyword">init</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token class-name">WKPreferences</span> <span class="token operator">*</span>preferences <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">WKPreferences</span> new<span class="token punctuation">]</span><span class="token punctuation">;</span>
preferences<span class="token punctuation">.</span>javaScriptCanOpenWindowsAutomatically <span class="token operator">=</span> <span class="token constant">YES</span><span class="token punctuation">;</span>
preferences<span class="token punctuation">.</span>minimumFontSize <span class="token operator">=</span> <span class="token number">40.0</span><span class="token punctuation">;</span>
configuration<span class="token punctuation">.</span>preferences <span class="token operator">=</span> preferences<span class="token punctuation">;</span>
    

<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>viewWillAppear<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token constant">BOOL</span><span class="token punctuation">)</span>animated
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">super</span> viewWillAppear<span class="token punctuation">:</span>animated<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>webView<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>userContentController addScriptMessageHandler<span class="token punctuation">:</span><span class="token keyword">self</span> name<span class="token punctuation">:</span>@<span class="token string-literal"><span class="token string">&quot;share&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>webView<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>userContentController addScriptMessageHandler<span class="token punctuation">:</span><span class="token keyword">self</span> name<span class="token punctuation">:</span>@<span class="token string-literal"><span class="token string">&quot;pickImage&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>viewWillDisappear<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token constant">BOOL</span><span class="token punctuation">)</span>animated
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">super</span> viewWillDisappear<span class="token punctuation">:</span>animated<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>webView<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>userContentController     removeScriptMessageHandlerForName<span class="token punctuation">:</span>@<span class="token string-literal"><span class="token string">&quot;share&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span><span class="token keyword">self</span><span class="token punctuation">.</span>webView<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>userContentController removeScriptMessageHandlerForName<span class="token punctuation">:</span>@<span class="token string-literal"><span class="token string">&quot;pickImage&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179832-16747">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="WKWebViewConfiguration *configuration = [[WKWebViewConfiguration alloc] init];
WKPreferences *preferences = [WKPreferences new];
preferences.javaScriptCanOpenWindowsAutomatically = YES;
preferences.minimumFontSize = 40.0;
configuration.preferences = preferences;
    

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;share&quot;];
      [self.webView.configuration.userContentController addScriptMessageHandler:self name:@&quot;pickImage&quot;];
}
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self.webView.configuration.userContentController     removeScriptMessageHandlerForName:@&quot;share&quot;];
    [self.webView.configuration.userContentController removeScriptMessageHandlerForName:@&quot;pickImage&quot;];
}
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179832-16747" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>js调用示例</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  window<span class="token punctuation">.</span>webkit<span class="token punctuation">.</span>messageHandlers<span class="token punctuation">.</span>share<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179832-42276">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="  window.webkit.messageHandlers.share.postMessage(xxx);
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179832-42276" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="native调用js的方式"><a href="#native调用js的方式" class="header-anchor">#</a> Native调用JS的方式</h3> <p>Native调用js需要,JavaScript的方法必须在全局的window上即可</p> <p>Android中主要有两种实现方法：</p> <ul><li>Android 4.4以前，通过loadUrl方法，执行一段js代码来实现。loadUrl方式使用起来方便简洁，但是效率低无法获得返回结果且调用的时候会刷新WebView</li> <li>Android 4.4以后可以使用evaluateJavascript方法。evaluateJavascript方法效率高获取返回值方便。调用的时候不刷新WebView</li></ul> <div class="language-java line-numbers-mode"><pre class="language-java"><code>webView<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">&quot;javascript:&quot;</span> <span class="token operator">+</span> javaScriptString<span class="token punctuation">)</span><span class="token punctuation">;</span>
webView<span class="token punctuation">.</span><span class="token function">evaluateJavascript</span><span class="token punctuation">(</span>javaScriptString<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ValueCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceiveValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
    xxx
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179832-36233">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="webView.loadUrl(&quot;javascript:&quot; + javaScriptString);
webView.evaluateJavascript(javaScriptString, new ValueCallback&lt;String&gt;() {
  @Override
  public void onReceiveValue(String value){
    xxx
  }
});
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179832-36233" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ios在WKWebview中可以通过evaluateJavaScript:javaScriptString来实现，支持iOS8.0及以上系统</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token comment">// swift</span>
<span class="token keyword">func</span> <span class="token function-definition function">evaluateJavaScript</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> javaScriptString<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> 
    completionHandler<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">Any</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token class-name">Error</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Void</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token nil constant">nil</span><span class="token punctuation">)</span>
<span class="token comment">// javaScriptString 需要调用的 JS 代码</span>
<span class="token comment">// completionHandler 执行后的回调</span>

<span class="token comment">// objective-c</span>
<span class="token punctuation">[</span>jsContext evaluateJavaScript<span class="token punctuation">:</span>@<span class="token string-literal"><span class="token string">&quot;ZcyJsBridge(ev, data)&quot;</span></span><span class="token punctuation">]</span>
</code><div class="m-mdic-copy-wrapper"><div class="u-mdic-copy-notify" id="j-notify-1731410179832-92552">成功</div><button class="u-mdic-copy-btn j-mdic-copy-btn" data-mdic-content="// swift
func evaluateJavaScript(_ javaScriptString: String, 
    completionHandler: ((Any?, Error?) -&gt; Void)? = nil)
// javaScriptString 需要调用的 JS 代码
// completionHandler 执行后的回调

// objective-c
[jsContext evaluateJavaScript:@&quot;ZcyJsBridge(ev, data)&quot;]
" data-mdic-attach-content="" data-mdic-notify-id="j-notify-1731410179832-92552" data-mdic-notify-delay="2000" data-mdic-copy-fail-text="copy fail" onclick="!function(t){const e={copy:(t='',e='')=&gt;new Promise((c,o)=&gt;{const n=document.createElement('textarea'),d=e?`\n\n${e}`:e;n.value=`${t}${d}`,document.body.appendChild(n),n.select();try{const t=document.execCommand('copy');document.body.removeChild(n),t?c():o()}catch(t){document.body.removeChild(n),o()}}),btnClick(t){const c=t&amp;&amp;t.dataset?t.dataset:{},o=c.mdicNotifyId,n=document.getElementById(o),d=c.mdicNotifyDelay,i=c.mdicCopyFailText;e.copy(c.mdicContent,c.mdicAttachContent).then(()=&gt;{n.style.display='block',setTimeout(()=&gt;{n.style.display='none'},d)}).catch(()=&gt;{alert(i)})}};e.btnClick(t)}(this);">复制代码</button></div></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="electron-桌面端开发"><a href="#electron-桌面端开发" class="header-anchor">#</a> Electron（桌面端开发）</h2> <p>Electron 是一个使用 JavaScript、HTML 和 CSS 构建跨平台的桌面应用程序。</p> <p>Electron 兼容 Mac、Windows 和 Linux，可以构建出三个平台的应用程序。</p> <p>Electron成功案例</p> <ul><li>VSCode： 程序员最常用的开发者工具。</li> <li>Atom： 是Github开发的文本编辑器，我想大部分的前端程序员都应该使用过。</li> <li>slack： 聊天群组 + 大规模工具集成 + 文件整合 + 搜索的一个工具。就是把很多你常用的工具整合到了一起。</li> <li>QQ： 新版QQ</li></ul> <p>Electron = Chromium + Node.js + Native APIs</p> <p><img src="/assets/img/electron.7ff068e1.jpeg" alt="electron"></p> <h3 id="chromium"><a href="#chromium" class="header-anchor">#</a> Chromium</h3> <p>Chromium 是 Google 为发展 Chrome 浏览器而启动的开源项目，Chromium 相当于 Chrome 的工程版或称实验版，新功能会率先在 Chromium 上实现，待验证后才会应用在Chrome 上，故 Chrome 的功能会相对落后但较稳定。</p> <p>Chromium为Electron提供强大的UI能力，可以在不考虑兼容性的情况下开发界面。</p> <h3 id="node-js"><a href="#node-js" class="header-anchor">#</a> Node.js</h3> <p>Node 是一个让 JavaScript 运行在服务端的开发平台，Node 使用事件驱动，非阻塞I/O 模型而得以轻量和高效。</p> <p>单单靠Chromium是不能具备直接操作原生GUI能力的，Electron内集成了Nodejs，这让其在开发界面的同时也有了操作系统底层 API 的能力，Nodejs 中常用的 Path、fs、Crypto 等模块在 Electron 可以直接使用。</p> <h3 id="native-api"><a href="#native-api" class="header-anchor">#</a> Native API</h3> <p>为了提供原生系统的GUI支持，Electron内置了原生应用程序接口，对调用一些系统功能，如调用系统通知、打开系统文件夹提供支持。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>基于Web渲染的基本原理都相同，都是原生应用嵌套Webview。Cordova、PhoneGap、Ionic等流行框架都封装了较为全面的调用原生的接口。JSBridge去除了大而全东西，将只留下web和native互相通讯的方式，更为灵活。</p> <p>基于Web渲染的方案，虽然带来了快速开发的优势，但承载大量Web标准的Web容器过于笨重，以至于牺牲了一些性能和用户体验，达不到与原生同样的标准，在复杂交互和动画上较难实现出良好的用户体验。</p> <p>此处框架推荐</p> <ul><li>针对需要开发跨端APP来讲，如果团队中，拥有原生开发的人员，建议选择JSBridge方式，反之选择Cordova、PhoneGap、Ionic等流行框架。</li> <li>针对需要开发跨端桌面应用来说，无脑Electron</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/project/hybrid/" class="prev router-link-active">
        简介
      </a></span> <span class="next"><a href="/project/hybrid/native.html">
        原生渲染
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8ebedc45.js" defer></script><script src="/assets/js/2.bfb6a95c.js" defer></script><script src="/assets/js/1.469e453a.js" defer></script><script src="/assets/js/29.852f6634.js" defer></script>
  </body>
</html>
