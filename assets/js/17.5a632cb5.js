(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{282:function(v,_,t){v.exports=t.p+"assets/img/process.04d9f51e.png"},283:function(v,_,t){v.exports=t.p+"assets/img/framework.4ede51d7.png"},368:function(v,_,t){"use strict";t.r(_);var a=t(10),s=Object(a.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"整体架构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#整体架构"}},[v._v("#")]),v._v(" 整体架构")]),v._v(" "),_("p",[v._v("技术总是为业务服务的，所以在谈论架构之前，我们应该先梳理业务需求。只有把业务需求罗列清楚，才能做好适合这个业务的架构。")]),v._v(" "),_("h2",{attrs:{id:"梳理需求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#梳理需求"}},[v._v("#")]),v._v(" 梳理需求")]),v._v(" "),_("h3",{attrs:{id:"监控目标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#监控目标"}},[v._v("#")]),v._v(" 监控目标")]),v._v(" "),_("ol",[_("li",[v._v("错误监控\n"),_("ol",[_("li",[v._v("性能指标记录：包含LCP、FID、CLS等")]),v._v(" "),_("li",[v._v("异常监控：js执行异常、promise异常、vue错误、react错误等")]),v._v(" "),_("li",[v._v("白屏监控：白屏时间")]),v._v(" "),_("li",[v._v("卡顿监控：监控页面fps")])])]),v._v(" "),_("li",[v._v("业务埋点\n"),_("ol",[_("li",[v._v("基本数据： PV、UV等")]),v._v(" "),_("li",[v._v("页面停留时长、页面访问历史路径")]),v._v(" "),_("li",[v._v("自定义携带数据，用户id等")]),v._v(" "),_("li",[v._v("用户行为监控：事件监听、请求监听、页面路径监听")])])])]),v._v(" "),_("h3",{attrs:{id:"监控应用场景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#监控应用场景"}},[v._v("#")]),v._v(" 监控应用场景")]),v._v(" "),_("ol",[_("li",[v._v("原生JavaScript")]),v._v(" "),_("li",[v._v("框架层面：Vue、React")]),v._v(" "),_("li",[v._v("小程序")])]),v._v(" "),_("h3",{attrs:{id:"结果展示"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#结果展示"}},[v._v("#")]),v._v(" 结果展示")]),v._v(" "),_("ol",[_("li",[v._v("错误监控展示\n"),_("ol",[_("li",[v._v("当前错误的堆栈及其他数据")]),v._v(" "),_("li",[v._v("错误发生时近几条具体的用户行为")]),v._v(" "),_("li",[v._v("页面性能监控数据")])])]),v._v(" "),_("li",[v._v("业务埋点内容展示\n"),_("ol",[_("li",[v._v("日访问量、页面停留时长、页面访问历史路径等统计")]),v._v(" "),_("li",[v._v("针对用户行为做漏斗分析")])])]),v._v(" "),_("li",[v._v("以上内容的可视化")])]),v._v(" "),_("h2",{attrs:{id:"整体流程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#整体流程"}},[v._v("#")]),v._v(" 整体流程")]),v._v(" "),_("p",[_("img",{attrs:{src:t(282),alt:"整体流程"}})]),v._v(" "),_("h2",{attrs:{id:"架构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#架构"}},[v._v("#")]),v._v(" 架构")]),v._v(" "),_("p",[_("img",{attrs:{src:t(283),alt:"整体架构"}})]),v._v(" "),_("p",[v._v("应用层通过SDK组装上报的数据，在接入层通过"),_("code",[v._v("削峰限流")]),v._v("减少服务器处理压力，再经过"),_("code",[v._v("数据二次处理")]),v._v("后，将原始日志存储在"),_("code",[v._v("ES")]),v._v("中，再经过"),_("code",[v._v("数据整合")]),v._v("后，将"),_("code",[v._v("聚合完毕后的数据")]),v._v("存入"),_("code",[v._v("数据库")]),v._v("中，最后提供"),_("code",[v._v("RESTful API")]),v._v(" 提供给监控平台调用。")]),v._v(" "),_("ul",[_("li",[v._v("削峰限流是为了避免激增的大数据量、恶意用户访问等高并发的数据导致的服务崩溃")]),v._v(" "),_("li",[v._v("数据二次处理是为了将"),_("code",[v._v("IP")]),v._v("、"),_("code",[v._v("归属地")]),v._v("等各种数据封装入上报数据中")]),v._v(" "),_("li",[v._v("数据整合包含防止脏数据添加的"),_("code",[v._v("数据清洗")]),v._v("功能和整合相同信息的数据，以便查询和追踪的"),_("code",[v._v("数据聚合")]),v._v("两部分")])])])}),[],!1,null,null,null);_.default=s.exports}}]);